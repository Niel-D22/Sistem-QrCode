<!DOCTYPE html>
<html>
  <head>
    <title>Scanner Barcode Absensi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Style tambahan untuk memastikan video memenuhi kotaknya dan scan-area */
      .camera-box {
        position: relative;
        overflow: hidden; 
      }
      #camera {
        width: 100%;
        height: 100%;
        object-fit: cover; 
      }
      .scan-area {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 75%; /* Ukuran area scan yang sedikit lebih besar */
        height: 25%;
        transform: translate(-50%, -50%);
        /* Warna border hijau institusi */
        border: 4px solid #10b981; /* Emerald Green */
        box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.6); 
        pointer-events: none; 
        z-index: 10;
        border-radius: 0.25rem; /* Sudut lebih tajam */
      }
      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen flex flex-col items-center p-6 font-sans">
    
    <h2 class="text-3xl font-bold text-gray-800 mb-8 mt-4 uppercase tracking-wider border-b-2 border-green-600 pb-2">
      Scan Barcode Mahasiswa
    </h2>

    <div class="camera-box w-full max-w-lg bg-gray-900 rounded-md shadow-xl mb-6 aspect-video">
      <video id="camera" autoplay playsinline class="rounded-md opacity-80"></video>
      <div class="scan-area"></div>
    </div>

    <p id="status" class="status text-lg font-semibold text-gray-800 mb-4 p-3 bg-white border border-gray-300 rounded-lg w-full max-w-lg text-center shadow-md">
      Status: <span class="text-green-600">Menunggu scan...</span>
    </p>

    <div class="upload-box mb-8 w-full max-w-lg">
      <label for="uploadInput" class="block text-sm font-medium text-gray-700 mb-2">
        Upload Gambar Barcode:
      </label>
      <input type="file" id="uploadInput" accept="image/*" class="
        block w-full text-sm text-gray-700
        file:mr-4 file:py-2 file:px-6
        file:rounded-md file:border-0
        file:text-sm file:font-semibold
        file:bg-green-600 file:text-white
        hover:file:bg-green-700 transition duration-150 cursor-pointer shadow-sm
        border border-gray-300 rounded-md p-1 bg-white
      " />
    </div>

    <img id="preview" class="preview hidden w-48 h-48 object-contain mb-6 border-4 border-dashed border-gray-400 p-1 rounded-md" />

    <div id="result-box" class="result-box hidden bg-white p-7 rounded-lg shadow-2xl w-full max-w-lg">
      <h3 class="text-2xl font-bold text-green-700 mb-4 border-b-2 border-gray-200 pb-2">Detail Absensi Mahasiswa</h3>

      <div class="space-y-3">
        <div class="grid grid-cols-2 gap-4 items-center">
            <strong class="text-gray-600">Nama:</strong> 
            <span id="nama" class="font-medium text-gray-900">-</span>
        </div>
        <div class="grid grid-cols-2 gap-4 items-center">
            <strong class="text-gray-600">NIM:</strong> 
            <span id="nim" class="font-medium text-gray-900">-</span>
        </div>
        <div class="grid grid-cols-2 gap-4 items-center">
            <strong class="text-gray-600">Kelas:</strong> 
            <span id="kelas" class="font-medium text-gray-900">-</span>
        </div>
        <div class="grid grid-cols-2 gap-4 items-center border-t pt-3 mt-3">
            <strong class="text-gray-600">Kode Barcode:</strong> 
            <span id="kode" class="font-mono text-sm bg-gray-50 p-1 rounded text-red-600 font-semibold">-</span>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>